
<!DOCTYPE html>
<html lang="pl" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <title>SCMS – Sprawdzenie biletu (WIN/CHECK)</title>
    <style>
        body { font-family: system-ui, Segoe UI, Arial, sans-serif; margin: 2rem; }
        h1 { margin-bottom: 0.5rem; }
        form { margin-top: 1rem; }
        label { display:block; margin-top: .6rem; }
        input { padding: .4rem; width: 18rem; }
        button { margin-top: 1rem; padding: .5rem 1rem; }
        .hint { color:#555; font-size:.9rem; }
        .result { margin-top: 2rem; background:#f7f7f7; padding: 1rem; border-radius: 8px; }
        .error { color:#b00020; margin-top:.25rem; }
        nav a { margin-right: 1rem; }
        code { background: #f0f0f0; padding: 0 .25rem; }
    </style>
</head>
<body>

<nav>
    /Strona główna</a>
    /swagger-ui/index.htmlSwagger UI</a>
</nav>

<h1>Sprawdzenie biletu (WIN/CHECK)</h1>
<p class="hint">
    Algorytm hashowania jest pobierany automatycznie z gry <code>game_id</code> (tabela <code>games</code>).<br/>
    Serial: <code>{YY}{GGG}{BB}{PPPPPPP}{TTT}</code> → hash wg algorytmu gry.
</p>

<!-- Używamy zwykłych name=... i th:value=..., żeby nie wymagać aktywnego obiektu przy GET -->
@{/win/check}

<label>Customer ID (YY, 2 cyfry)
    <input name="customer_id"
           th:value="${checkRequest != null ? checkRequest.customer_id : ''}"
           placeholder="np. 11" />
</label>

<label>Game ID (GGG, 3 cyfry)
    <input name="game_id"
           th:value="${checkRequest != null ? checkRequest.game_id : ''}"
           placeholder="np. 101" />
</label>

<label>Batch ID (BB, 2 cyfry)
    <input name="batch_id"
           th:value="${checkRequest != null ? checkRequest.batch_id : ''}"
           placeholder="np. 01" />
</label>

<label>Pack ID (PPPPPPP, opcjonalne, 0–7 cyfr)
    <input name="pack_id"
           th:value="${checkRequest != null ? checkRequest.pack_id : ''}"
           placeholder="np. 0000123" />
</label>

<label>Ticket ID (TTT, 3 cyfry)
    <input name="ticket_id"
           th:value="${checkRequest != null ? checkRequest.ticket_id : ''}"
           placeholder="np. 007" />
</label>

<button type="submit">Sprawdź</button>
</form>

<!-- Wynik – po POST -->
<div class="result" th:if="${result}">
    <h2>Wynik</h2>

    <!-- Uwaga: dostosuj nazwy pól do getterów w CheckResponse.
         Jeśli masz camelCase w Javie (np. ticketHash, claimStatus), zmień na te nazwy. -->

    <p><strong>found:</strong> <span th:text="${result.found}"></span></p>
    <p><strong>ticket_hash:</strong> <span th:text="${result.ticket_hash}"></span></p>
    <p th:if="${result.tier}"><strong>tier:</strong> <span th:text="${result.tier}"></span></p>
    <p th:if="${result.prize != null}"><strong>prize:</strong> <span th:text="${result.prize}"></span></p>
    <p th:if="${result.claim_status != null}"><strong>claim_status:</strong> <span th:text="${result.claim_status}"></span></p>
    <p th:if="${result.message}"><strong>message:</strong> <span th:text="${result.message}"></span></p>
</div>

</body>
</html>
